
%config CONFIG_DRIVER_EFM32_USART
  desc Enable EFM32 USART driver
  parent CONFIG_ARCH_EFM32
%config end

%config CONFIG_DRIVER_EFM32_USART_RATE
  desc Specify EFM32 USART default char baud rate
  parent CONFIG_DRIVER_EFM32_USART
  flags value
  default 115200
%config end

%config CONFIG_DRIVER_EFM32_USART_CHAR
  desc Enable EFM32 USART char class driver
  parent CONFIG_DRIVER_EFM32_USART
  depend CONFIG_DEVICE_CHAR
  depend CONFIG_DEVICE_IOMUX
  require CONFIG_DRIVER_EFM32_USART_RATE
  suggest CONFIG_DEVICE_IRQ
  default defined
  provide CONFIG_DEVICE_START_LOG2INC=2
%config end

%config CONFIG_DRIVER_EFM32_USART_CHAR_DMA
  desc Enable USART driver with DMA support.
  parent CONFIG_DRIVER_EFM32_USART
  depend CONFIG_DEVICE_CHAR
  depend CONFIG_DEVICE_IOMUX
  depend CONFIG_DRIVER_EFR32_DMA CONFIG_DRIVER_EFM32_DMA
  require CONFIG_DRIVER_EFM32_USART_RATE
  suggest CONFIG_DEVICE_IRQ
  default undefined
%config end

%config CONFIG_DRIVER_EFM32_USART_CHAR_SWFIFO
  desc Size of the additional software FIFOs. 0 disables software FIFOs.
  parent CONFIG_DRIVER_EFM32_USART_CHAR
  flags value
  default 0
%config end

%config CONFIG_DRIVER_EFM32_USART_CHAR_USE_SWFIFO
  desc Internal token for deps
  parent CONFIG_DRIVER_EFM32_USART_CHAR
  depend CONFIG_DEVICE_IRQ
  depend CONFIG_DEVICE_SLEEP
  suggest CONFIG_DEVICE_VALIO_UART_CONFIG
  when CONFIG_DRIVER_EFM32_USART_CHAR_SWFIFO>0
%config end

%config CONFIG_DRIVER_EFM32_USART_SPI
  desc Enable EFM32 USART SPI controller class driver
  parent CONFIG_DRIVER_EFM32_USART
  depend CONFIG_DEVICE_SPI
  depend CONFIG_DEVICE_IOMUX
  suggest CONFIG_DEVICE_IRQ
  default defined
%config end

%config CONFIG_DRIVER_EFM32_USART_PRINTK
  desc Enable EFM32 USART printk handler
  parent CONFIG_DRIVER_EFM32_USART
  provide CONFIG_MUTEK_PRINTK_HANDLER
  depend CONFIG_MUTEK_PRINTK
  require CONFIG_DRIVER_EFM32_USART_PRINTK_PIN
  require CONFIG_DRIVER_EFM32_USART_PRINTK_LOC
  require CONFIG_DRIVER_EFM32_USART_RATE
  require CONFIG_MUTEK_PRINTK_ADDR!=0
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x4000e000 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFM
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x4000e400 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFM
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x4000c000 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFM
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x4000c400 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFM
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x4000c800 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFM
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010000 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG1
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010400 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG1
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010000 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG12
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010400 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG12
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010800 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG12
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010c00 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG12
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010000 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG14
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010400 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG14
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010800 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG14
  when CONFIG_MUTEK_PRINTK CONFIG_MUTEK_PRINTK_ADDR=0x40010c00 CONFIG_EFM32_ARCHREV=EFM32_ARCHREV_EFR_XG14
%config end

%config CONFIG_DRIVER_EFM32_USART_PRINTK_PIN
  desc Specify EFM32 USART pin used for printk TX
  parent CONFIG_DRIVER_EFM32_USART_PRINTK
  flags value
%config end

%config CONFIG_DRIVER_EFM32_USART_PRINTK_LOC
  desc Specify EFM32 USART location for printk
  parent CONFIG_DRIVER_EFM32_USART_PRINTK
  flags value
%config end

%init INIT_DRIVER_EFM32_USART_PRINTK
  parent CONFIG_DRIVER_EFM32_USART_PRINTK
  during INIT_MUTEK_PRINTK
  function efm32_usart_printk_init
%init end

%config CONFIG_DRIVER_EFM32_USART_CHAR_DMA_FIFO_SIZE
  desc Size of the buffer used for DMA.
  parent CONFIG_DRIVER_EFM32_USART_CHAR_DMA
  flags value
  default 512
%config end

%config CONFIG_DRIVER_EFM32_USART_CHAR_DMA_TIMEOUT_SYMBOL
  desc Timeout value in symbol number depending on bitrate
  parent CONFIG_DRIVER_EFM32_USART_CHAR_DMA
  flags value
  default 256
%config end

%config CONFIG_DRIVER_EFM32_USART_DMA_THRD
  desc DMA will be used for transfer if size is greater than or equal to this value.
  parent CONFIG_DRIVER_EFM32_USART
  flags value
  default 2
%config end

