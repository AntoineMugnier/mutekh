
%config CONFIG_DEVICE_HELPER_PREFIX
  desc Device helper prefix
  parent CONFIG_DEVICE
  flags value
  default
%config end

%config CONFIG_ARCH_STM32
  desc STMicroelectronics STM32 platform support
  module arch Hexo
  provide CONFIG_ARCH_META
  provide CONFIG_ARCH_NAME=stm32
  exclude CONFIG_ARCH_SMP CONFIG_ARCH_CLUSTER
  provide CONFIG_DEVICE_HELPER_PREFIX=STM32
%config end

%init INIT_STM32_MEM_ALLOC
  parent CONFIG_ARCH_STM32
  during INIT_MUTEK_MEMALLOC
  function stm32_mem_init
%init end

%init INIT_STM32_CLOCK
  parent CONFIG_ARCH_STM32
  during INIT_BOOTSTRAP
  after INIT_MEMORY_SECTIONS
  before INIT_MUTEK_MEMALLOC
  function stm32_clock_init
%init end

%config CONFIG_STM32_F401
  desc STM32 F401 microcontroller
  parent CONFIG_ARCH_STM32
  flags auto
%config end

%config CONFIG_BOARD_STM32
  desc STM32 board definition
  parent CONFIG_ARCH_STM32
  flags internal
  when CONFIG_BOARD_STM32_NUCLEOF401RE
  single CONFIG_BOARD_STM32_NUCLEOF401RE
%config end

%config CONFIG_BOARD_STM32_NUCLEOF401RE
  desc STM32 Nucleo STM32F401RE board
  parent CONFIG_BOARD_STM32
  depend CONFIG_STM32_F401
  depend CONFIG_DRIVER_STM32_USART_PRINTK
%config end

