
%module Mutek

%config CONFIG_MUTEK_MAIN
desc Enable Mutek global intialization. provide mutek_main() and mutek_main_smp() functions.
desc Can be disabled if application code handle all the initialization stuff.
default defined
%config end

%config CONFIG_MUTEK_CONSOLE
desc Enable text console support
depend CONFIG_DRIVER_TTY CONFIG_DRIVER_UART
%config end

%config CONFIG_MUTEK_TIMERMS
desc Provide a general purpose milliseconds timer object
depend CONFIG_DRIVER_TIMER
%config end

%config CONFIG_MUTEK_LOGO
desc Add builtin MutekH logo bitmap to the kernel
depend CONFIG_DRIVER_FB
%config end


%config CONFIG_VMEM
desc Provide virtual memory support
provide CONFIG_HEXO_MMU
provide CONFIG_VMEM_PHYS_ALLOC
provide CONFIG_VMEM_KERNEL_ALLOC
exclude CONFIG_MUTEK_MEMALLOC_SIMPLE
%config end

%config CONFIG_VMEM_PHYS_ALLOC
desc Provide physical page allocator for virtual memory
%config end

%config CONFIG_VMEM_KERNEL_ALLOC
parent CONFIG_VMEM
require CONFIG_HEXO_MMU
require CONFIG_VMEM_PHYS_ALLOC
desc Provide kernel virtual address space allocator
%config end


%config CONFIG_MUTEK_SCHEDULER
desc Hexo scheduler feature is enabled
default defined
require CONFIG_MUTEK_SCHEDULER_IDLE_STACK_SIZE
require CONFIG_MUTEK_SCHEDULER_MIGRATION CONFIG_MUTEK_SCHEDULER_STATIC
single  CONFIG_MUTEK_SCHEDULER_MIGRATION CONFIG_MUTEK_SCHEDULER_STATIC
%config end

%config CONFIG_MUTEK_SCHEDULER_PREEMPT
desc Scheduler is preemptiv
parent CONFIG_MUTEK_SCHEDULER
depend CONFIG_DRIVER_TIMER
%config end

%config CONFIG_MUTEK_SCHEDULER_MIGRATION
desc Scheduler algorithm use permanent context migration among available processors
parent CONFIG_MUTEK_SCHEDULER
default defined
%config end

%config CONFIG_MUTEK_SCHEDULER_STATIC
desc Scheduler algorithm use per cpu context list
parent CONFIG_MUTEK_SCHEDULER
default undefined
%config end

%config CONFIG_MUTEK_SCHEDULER_MIGRATION_AFFINITY
desc Handle scheduler context cpu affininty in migration mode
depend CONFIG_MUTEK_SCHEDULER_MIGRATION
depend CONFIG_SMP
parent CONFIG_MUTEK_SCHEDULER
default undefined
%config end

%config CONFIG_MUTEK_SCHEDULER_IDLE_STACK_SIZE
desc Size of the stack allocated for idle scheduler context.
desc Stack size is specified in stack bytes count.
parent CONFIG_MUTEK_SCHEDULER
default 2048
%config end

%config CONFIG_MUTEK_SCHEDULER_CANDIDATE_FCN
desc Enables sched_context_candidate_fcn(), uses an external function to check if a running thread must be selected
parent CONFIG_MUTEK_SCHEDULER
default undefined
%config end

%config CONFIG_MUTEK_RWLOCK
depend CONFIG_MUTEK_SCHEDULER
default defined
desc Provide read/write locks based on hexo scheduler
%config end


%config CONFIG_MUTEK_MEMALLOC_SIMPLE
desc Enable use of simple memory allocation algorithm.
desc Incremental memory allocation without freeing.
default undefined
exclude CONFIG_MUTEK_MEMALLOC_SMART
%config end

%config CONFIG_MUTEK_MEMALLOC_SMART
desc Enable use of memory allocation algorithm.
default defined
require CONFIG_MUTEK_MEMALLOC_ALGO_FIRSTFIT CONFIG_MUTEK_MEMALLOC_ALGO_BESTFIT
single CONFIG_MUTEK_MEMALLOC_ALGO_FIRSTFIT CONFIG_MUTEK_MEMALLOC_ALGO_BESTFIT
exclude CONFIG_MUTEK_MEMALLOC_SIMPLE
%config end

%config CONFIG_MUTEK_MEMALLOC_ALGO_FIRSTFIT
desc select memory allocation algorithm first fit
parent CONFIG_MUTEK_MEMALLOC_SMART
default defined
%config end

%config CONFIG_MUTEK_MEMALLOC_ALGO_BESTFIT
desc select memory allocation algorithm best fit
parent CONFIG_MUTEK_MEMALLOC_SMART
default undefined
%config end

%config CONFIG_MUTEK_MEMALLOC_ALIGN
desc Memory allocation block address alignment
flags mandatory
default 0x20
%config end

%config CONFIG_MUTEK_MEMALLOC_DEBUG
desc When enabled all allocated and freed memory blocks will filled be with 0x5a and 0xa5 bytes
%config end

%config CONFIG_MUTEK_MEMALLOC_STATS
desc keep stats about allocated blocks count and size
depend CONFIG_MUTEK_MEMALLOC_SMART
%config end

%config CONFIG_MUTEK_MEMALLOC_SIGNED
desc When enabled all memory block headers will include a special magic value
depend CONFIG_MUTEK_MEMALLOC_SMART
%config end

%config CONFIG_MUTEK_MEMALLOC_GUARD
desc Add a guard zone before and after each allocated block.
desc All guard zone content can be check with the mem_guard_check() function to detect bad memory write access.
depend CONFIG_MUTEK_MEMALLOC_SMART
depend CONFIG_MUTEK_MEMALLOC_DEBUG
suggest CONFIG_MUTEK_MEMALLOC_ALIGN=1
require CONFIG_MUTEK_MEMALLOC_GUARD_SIZE
%config end

%config CONFIG_MUTEK_MEMALLOC_GUARD_SIZE
desc Memory allocation debug guard zone size in bytes.
parent CONFIG_MUTEK_MEMALLOC_GUARD
default 256
%config end

%config CONFIG_MUTEK_MEMALLOC_GUARD_INSTRUMENT
desc Automatically check guard zone on all function calls and returns.
parent CONFIG_MUTEK_MEMALLOC_GUARD
depend CONFIG_COMPILE_INSTRUMENT
%config end


%config CONFIG_MUTEK_PRINTK
desc Provide printk() for kernel messages
default defined
%config end

%config CONFIG_PRINTF_ARG_SIMPLE
desc libc printf() features are reduced
default undefined
%config end

%config CONFIG_PRINTF_ARG_EXT
desc libc printf support %S and %P extentions to dump buffers
default defined
%config end
