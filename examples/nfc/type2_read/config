%set OUTPUT_NAME nfc_type2_read
%append MODULES $(OUTPUT_NAME):$(CONFIGPATH)

CONFIG_MUTEK_THREAD
CONFIG_LICENSE_APP_BSD
CONFIG_APP_START
CONFIG_MUTEK_CONTEXT_SCHED

CONFIG_COMPILE_PIC undefined
CONFIG_COMPILE_FRAMEPTR undefined
CONFIG_COMPILE_OPTIMIZE s

%section nrf5x-i2c
  %inherit nrf5x-pca10028

  CONFIG_DRIVER_NFC_MICORE2
  CONFIG_DRIVER_NFC_MICORE2_I2C
  CONFIG_DRIVER_NRF5X_I2C

%section nrf5x-spi
  %inherit nrf5x-pca10028

  CONFIG_DRIVER_NFC_MICORE2
  CONFIG_DRIVER_NFC_MICORE2_SPI
  CONFIG_DRIVER_NRF5X_SPI

%section nrf5x-pca10028
  CONFIG_DRIVER_NRF5X_CLOCK
  CONFIG_DRIVER_NRF5X_TIMER
  CONFIG_DRIVER_NRF5X_RTC
  CONFIG_DRIVER_NRF5X_GPIO
  CONFIG_DRIVER_NRF5X_GPIO_ICU
  CONFIG_DRIVER_NRF5X_GPIO_ICU_CHANNEL_COUNT 2

  %subsection printk-uart
    CONFIG_DRIVER_NRF5X_PRINTK
    CONFIG_MUTEK_PRINTK_HEXDUMP
  %end

  %subsection printk-rtt
    CONFIG_DRIVER_RTT_PRINTK
    CONFIG_MUTEK_PRINTK_HEXDUMP
  %end

  %subsection shell-uart
    CONFIG_DRIVER_NRF5X_UART
    CONFIG_DEVICE_UART
    %inherit shell
  %end

  %subsection shell-rtt
    CONFIG_DRIVER_CHAR_RTT
    %inherit shell
  %end

%common

%include arch/arch.build
%include scripts/options.build

CONFIG_HEXO_CPU_STACK_SIZE 0x1000
CONFIG_PTHREAD_STACK_SIZE  0x1000
